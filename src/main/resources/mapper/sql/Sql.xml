<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ##################################################
     # ■ 샘플 Mapper ■ ymkang ■ 2018. 09. 03.
     ################################################### -->
<mapper namespace="sql">
    
	<insert id="insertMember" >
		insert into MEMBER values(
			#{id}, #{password}, #{name}, #{phone}, #{email}, #{gender}, #{birth}
			)

	</insert>
	
	<!-- 로그인시 아이디 값으로  DB에 있는 정보 가져오기 -->	
	<select id="selectOne"  resultType="User">
		select UserId AS id
		      ,UserPw AS password 	
		from MEMBER where UserId = #{id} 
	</select>
	
	<!--  -->
	<select id="selectlist"  resultType="User">
		select UserId AS id
		      ,UserPw AS password 		      
		from   MEMBER
	</select>
	
	<!-- 게시판 목록에 뿌려주기 -->
	<select id="selectboardlist"  resultType="Board">
		select	 BoardNo	AS bno
				,UserId		AS uid
				,BoardTitle AS title
				,BoardCnt	AS cnt
				,BoardDate  AS date
				,BoardHit   AS hit
		from   	 BOARD
		ORDER BY BoardNo DESC
	</select>
	
	<!-- 게시글 저장 -->
	<insert id="insertboard" >
		insert into BOARD(UserId,BoardTitle,BoardCnt) values(
			#{uid}, #{title}, #{cnt}
			)

	</insert>
	
	<!-- 게시글 번호를 통해 DB에서 찾아 게시글 읽기 -->
	<select id="boardread" resultType="Board">
		select	 BoardNo	AS bno
				,UserId		AS uid
				,BoardTitle AS title
				,BoardCnt	AS cnt
				,BoardDate  AS date
				,BoardHit   AS hit
		from   	 BOARD
		where	 BoardNo = #{bno} 
	</select>
	
	<!-- 수정한 게시글 Update -->
	<select id="boardupdate">
		update	 BOARD
		set		 BoardTitle = #{title}
				,BoardCnt	= #{cnt}
				,BoardDate	= GETDATE()
		where	 BoardNo 	= #{bno} 
	</select>
</mapper>
