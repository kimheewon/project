<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ##################################################
     # ■ 샘플 Mapper ■ ymkang ■ 2018. 09. 03.
     ################################################### -->
<mapper namespace="sql">
    
	<insert id="insertMember" >
		insert into TMember values(
			#{id}, #{password}, #{name}, #{phone}, #{email}, #{gender}, #{birth}
			)

	</insert>
	
	<!-- 로그인시 아이디 값으로  DB에 있는 정보 가져오기 -->	
	<select id="selectOne"  resultType="User">
		select   UserNo AS intUserNo
				,UserId AS StrUserid
		    	,UserPw AS StrUserPw 	
		from TUser where UserId = #{id} 
	</select>
	
	<!--  -->
	<select id="selectlist"  resultType="User">
		select UserId AS StrUserid
		      ,UserPw AS StrUserPw 		      
		from   TUser
	</select>
	
	<!-- 게시판 목록에 뿌려주기 -->
	<select id="selectboardlist"  resultType="Board">
		select	 BoardNo		AS intBoardNo
				,UserId			AS strUserId
				,BoardTitle 	AS strBoardTitle
				,BoardContent	AS strBoardContent
				,BoardDate 	 	AS dateBoardDate
				,BoardHit   	AS intHit
		from   	 TBoard
		ORDER BY BoardNo DESC
	</select>
	
	<!-- 게시글 저장 -->
	<insert id="insertboard" >
		insert into TBoard(UserId,BoardTitle,BoardContent) values(
			#{strUserId}, #{strBoardTitle}, #{strBoardContent}
			)

	</insert>
	
	<!-- 게시글 번호를 통해 DB에서 찾아 게시글 읽기 -->
	<select id="boardread" resultType="Board">
		select	 BoardNo		AS intBoardNo
				,UserId			AS strUserId
				,BoardTitle 	AS strBoardTitle
				,BoardContent	AS strBoardContent
				,BoardDate  	AS dateBoardDate
				,BoardHit   	AS intHit
		from   	 TBoard
		where	 BoardNo = #{intBoardNo} 
	</select>
	
	<!-- 수정한 게시글 Update -->
	<select id="boardupdate">
		update	 TBoard
		set		 BoardTitle = 	#{strBoardTitle}
				,BoardContent	= #{strBoardContent}
				,BoardDate	= GETDATE()
		where	 BoardNo 	= #{intBoardNo} 
	</select>
	
	<!-- 댓글 뿌리기 -->
	<select id="selectcmmtlist"  resultType="Comment">
		select	 CmmtNo			AS intCmmtNo
				,BoardNo		AS intBoardNo
				,UserId			AS strUserId
				,CmmtComment 	AS strCmmtComment
				,CmmtDate		AS dateCmmtDate		
		from   	 TComment
		where	 BoardNo = #{intBoardNo}
		ORDER BY CmmtNo	DESC
	</select>
	
	<!-- 댓글 저장 -->
	<insert id="insertcomment" >
		insert into TComment(BoardNo,UserId,CmmtComment) values(
			#{intBoardNo}, #{strUserId}, #{strCmmtComment}
			)
	</insert>
</mapper>
